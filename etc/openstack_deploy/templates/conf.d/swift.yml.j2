# {{ ansible_managed }}
---
# The nodes that will be running the Swift services
{% if 'swift' in onpc_services_list %}
swift-proxy_hosts:
{% for h in infrastructure_hosts_dict %}
  {{ h.name }}:
    ip: {{ h.ip_v4 }}
    container_vars:
      swift_proxy_vars:
        limit_container_types: swift_proxy
        read_affinity: "r{{ loop.index }}=100"
        write_affinity: "r{{ loop.index }}"
        write_affinity_node_count: "2 * replicas"
{% endfor %}

swift_hosts:
{% for h in swift_hosts_dict %}
  {{ h.name }}:
    ip: {{ h.ip_v4 }}
    container_vars:
      swift_vars:
        limit_container_types: swift
        zone: {{ loop.index }}
        region: 1
{% endfor %}
{% endif %}
